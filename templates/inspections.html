{% extends "base.html" %}

{% block title %}Inspection Log - {{ rope_id }}{% endblock %}

{% block content %}

<h2>Inspection Log - {{ rope_id }}</h2>

<!-- Desktop Table -->
<div class="desktop-table">
    <div class="table-wrapper">
        <table>
            <tr>
                <th>SL</th>
                <th>Date</th>
                <th>Inspected By</th>
                <th>Verdict</th>
                <th>Comments</th>
                <th>Image</th>
            </tr>

            {% for inspection in inspections %}
            <tr>
                <td>{{ loop.index }}</td>
                <td>{{ inspection.inspection_date }}</td>
                <td>{{ inspection.inspected_by }}</td>
                <td>
                    {% if inspection.verdict == "pass" %}
                        <span class="status-active">PASS</span>
                    {% else %}
                        <span class="status-retired">FAIL</span>
                    {% endif %}
                </td>
                <td>{{ inspection.comment or "" }}</td>
                <td>
                    {% if inspection.image_url %}
                        <a href="{{ inspection.image_url }}" target="_blank">
                            <img src="{{ inspection.image_url }}" class="table-image">
                        </a>
                    {% else %}
                        -
                    {% endif %}
                </td>
            </tr>
            {% endfor %}
        </table>
    </div>
</div>

<!-- Mobile Cards -->
<div class="mobile-cards">
    {% for inspection in inspections %}
    <div class="log-card">
        <div><strong>Date:</strong> {{ inspection.inspection_date }}</div>
        <div><strong>Inspected By:</strong> {{ inspection.inspected_by }}</div>

        <div>
            <strong>Verdict:</strong>
            {% if inspection.verdict == "pass" %}
                <span class="status-active">PASS</span>
            {% else %}
                <span class="status-retired">FAIL</span>
            {% endif %}
        </div>

        <div><strong>Comment:</strong> {{ inspection.comment or "" }}</div>

        {% if inspection.image_url %}
        <div class="log-image">
            <a href="{{ inspection.image_url }}" target="_blank">
                <img src="{{ inspection.image_url }}">
            </a>
        </div>
        {% endif %}
    </div>
    {% endfor %}
</div>

<br>

<a class="btn" href="/rope/{{ rope_id }}/inspections/add-new">Add Inspection</a>
<a class="btn" href="/rope/{{ rope_id }}">Back to Overview</a>

{% endblock %}
